"use strict";angular.module("npm-plugin-browser",["infinite-scroll","ngProgress","slide-header"]),angular.module("npm-plugin-browser").controller("PluginListCtrl",["$scope","$http","$location","$q","ngProgress",function(t,r,n,e,i){var a=["name","keywords","rating","description","author","modified","homepage","version"],o=15,s=function(t){return a.forEach(function(r){"keywords"!==r&&Array.isArray(t.fields[r])&&(t.fields[r]=t.fields[r][0])}),t.fields},u=function(t){var r={results:t.hits.hits.map(s),total:t.hits.total};return r},l=function(t,n){return r.get("http://registry.gulpjs.com/_search",{params:{q:"keywords:gulpplugin,gulpfriendly",fields:a.join(","),start:t,size:n},transformResponse:r.defaults.transformResponse.concat([u])})},c=function(){var t=arguments;return function(r,n){for(var e,i,a=0,o=t.length;o>a;a++){if(e=t[a](r),i=t[a](n),i>e)return-1;if(e>i)return 1}return 0}},f=function(r){return r.sort(c(function(r){return t.blackList[r.name]?1:0},function(t){return-t.rating},function(t){return t.name}))};i.start(),e.all([r.get("blackList.json"),l(0,o)]).then(function(r){return t.blackList=r[0].data,t.data=f(r[1].data.results),l(o,r[1].data.total)}).then(function(r){t.data=f(t.data.concat(r.data.results)),angular.isString(n.search().q)&&(t.search=n.search().q),i.complete()}),t.orderByGulpKeywords=function(t){return"gulpplugin"===t||"gulpfriendly"===t?-1:0}}]),angular.module("npm-plugin-browser").directive("tooltip",function(){return{link:function(t,r,n){var e=n.tooltipPlacement||"right";r.attr("title",n.tooltip).tooltip({placement:e})}}});